# è„šæœ¬å‘å¯¼ä½¿ç”¨æŒ‡å—

## ğŸ“– æ¦‚è¿°

è„šæœ¬å‘å¯¼åŠŸèƒ½å…è®¸æ‚¨é€šè¿‡å›¾å½¢åŒ–ç•Œé¢é…ç½®ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯æ‰§è¡Œçš„è„šæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ä»£ç ã€‚å‘å¯¼æ”¯æŒåˆ†æ­¥éª¤é…ç½®ï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯ã€é¡µé¢æ“ä½œã€ç¤¾äº¤ä»»åŠ¡ã€é“¾ä¸Šæ“ä½œç­‰ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- âœ… **å‘å¯¼å¼é…ç½®**ï¼šåˆ†æ­¥éª¤é…ç½®ï¼Œç®€å•æ˜“ç”¨
- âœ… **è‡ªåŠ¨ç”Ÿæˆè„šæœ¬**ï¼šæ ¹æ®é…ç½®è‡ªåŠ¨ç”ŸæˆJavaScript/Python/Shellè„šæœ¬
- âœ… **è„šæœ¬å¯¼å‡º**ï¼šæ”¯æŒå¯¼å‡ºè„šæœ¬æ–‡ä»¶
- âœ… **ç›´æ¥æ‰§è¡Œ**ï¼šç”Ÿæˆè„šæœ¬åå¯ç›´æ¥åˆ›å»ºä»»åŠ¡å¹¶æ‰§è¡Œ
- âœ… **å¤šè„šæœ¬ç±»å‹**ï¼šæ”¯æŒJavaScriptã€Pythonã€Shellä¸‰ç§è„šæœ¬ç±»å‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å–é…ç½®æ¨¡æ¿

```bash
GET /api/airdrop/wizard/template
```

è¿”å›é»˜è®¤çš„å‘å¯¼é…ç½®æ¨¡æ¿ã€‚

### 2. é…ç½®å‘å¯¼å‚æ•°

æ ¹æ®æ¨¡æ¿å¡«å†™é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- åŸºæœ¬ä¿¡æ¯ï¼ˆé¡¹ç›®åç§°ã€ç½‘ç«™URLç­‰ï¼‰
- é¡µé¢æ“ä½œï¼ˆå¯¼èˆªã€ç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰
- ç¤¾äº¤ä»»åŠ¡ï¼ˆTwitterã€Discordç­‰ï¼‰
- é“¾ä¸Šæ“ä½œï¼ˆè¿æ¥é’±åŒ…ã€Swapã€Claimç­‰ï¼‰

### 3. ç”Ÿæˆè„šæœ¬

```bash
POST /api/airdrop/wizard/generate
Content-Type: application/json

{
  "projectName": "Lineraç©ºæŠ•",
  "websiteUrl": "https://linera.io",
  "scriptType": "javascript",
  ...
}
```

### 4. å¯¼å‡ºæˆ–æ‰§è¡Œ

- **å¯¼å‡ºè„šæœ¬**ï¼šä½¿ç”¨ `/wizard/export` æ¥å£
- **åˆ›å»ºä»»åŠ¡**ï¼šä½¿ç”¨ `/wizard/create-task` æ¥å£

---

## ğŸ“ é…ç½®è¯´æ˜

### æ­¥éª¤1: åŸºæœ¬ä¿¡æ¯

```json
{
  "projectName": "Lineraç©ºæŠ•",
  "websiteUrl": "https://linera.io",
  "scriptType": "javascript",
  "description": "Lineraç©ºæŠ•ä»»åŠ¡è‡ªåŠ¨åŒ–è„šæœ¬"
}
```

### æ­¥éª¤2: é¡µé¢æ“ä½œ

```json
{
  "pageActions": [
    {
      "actionType": "navigate",
      "order": 1,
      "description": "è®¿é—®é¦–é¡µ",
      "params": {
        "url": "https://linera.io"
      }
    },
    {
      "actionType": "click",
      "order": 2,
      "description": "ç‚¹å‡»è¿æ¥é’±åŒ…æŒ‰é’®",
      "params": {
        "selector": "[data-testid='connect-wallet']"
      }
    },
    {
      "actionType": "input",
      "order": 3,
      "description": "è¾“å…¥é‚®ç®±",
      "params": {
        "selector": "input[name='email']",
        "value": "test@example.com"
      }
    }
  ]
}
```

**æ”¯æŒçš„æ“ä½œç±»å‹**ï¼š
- `navigate` - é¡µé¢å¯¼èˆª
- `click` - ç‚¹å‡»å…ƒç´ 
- `input` - è¾“å…¥æ–‡æœ¬
- `wait` - ç­‰å¾…æŒ‡å®šæ—¶é—´
- `waitForSelector` - ç­‰å¾…å…ƒç´ å‡ºç°
- `scroll` - æ»šåŠ¨é¡µé¢

### æ­¥éª¤3: ç¤¾äº¤ä»»åŠ¡

```json
{
  "enableSocialTasks": true,
  "twitterTask": {
    "enabled": true,
    "account": "@linera_official",
    "actionType": "follow"
  },
  "discordTask": {
    "enabled": true,
    "account": "linera",
    "actionType": "join"
  }
}
```

### æ­¥éª¤4: é“¾ä¸Šæ“ä½œ

```json
{
  "enableOnchainTasks": true,
  "connectWallet": true,
  "walletType": "MetaMask",
  "swapConfig": {
    "enabled": true,
    "fromToken": "ETH",
    "toToken": "USDC",
    "amount": "0.01"
  },
  "claimConfig": {
    "enabled": true,
    "claimUrl": "https://linera.io/claim",
    "claimButtonSelector": "button:has-text('Claim')"
  }
}
```

### æ­¥éª¤5: é«˜çº§é…ç½®

```json
{
  "includeHelperFunctions": true,
  "waitTimes": {
    "pageLoad": 2000,
    "navigate": 2000,
    "click": 1000,
    "input": 500
  },
  "errorHandling": {
    "enableRetry": true,
    "maxRetries": 3,
    "retryInterval": 1000,
    "continueOnError": true
  }
}
```

---

## ğŸ“š APIæ¥å£

### 1. ç”Ÿæˆè„šæœ¬

**æ¥å£**: `POST /api/airdrop/wizard/generate`

**è¯·æ±‚ä½“**:
```json
{
  "projectName": "Lineraç©ºæŠ•",
  "websiteUrl": "https://linera.io",
  "scriptType": "javascript",
  "pageActions": [...],
  "enableSocialTasks": true,
  "twitterTask": {...},
  "enableOnchainTasks": true,
  "connectWallet": true
}
```

**å“åº”**:
```json
{
  "success": true,
  "script": "// ç”Ÿæˆçš„è„šæœ¬å†…å®¹...",
  "scriptType": "javascript",
  "projectName": "Lineraç©ºæŠ•",
  "message": "è„šæœ¬ç”ŸæˆæˆåŠŸ"
}
```

### 2. åˆ›å»ºä»»åŠ¡å¹¶æ‰§è¡Œ

**æ¥å£**: `POST /api/airdrop/wizard/create-task`

**è¯·æ±‚å‚æ•°**:
- `profileIds` (å¯é€‰): æµè§ˆå™¨é…ç½®æ–‡ä»¶IDåˆ—è¡¨
- `executeImmediately` (å¯é€‰, é»˜è®¤false): æ˜¯å¦ç«‹å³æ‰§è¡Œ

**è¯·æ±‚ä½“**: åŒç”Ÿæˆè„šæœ¬æ¥å£

**å“åº”**:
```json
{
  "success": true,
  "taskId": "task_001",
  "script": "// ç”Ÿæˆçš„è„šæœ¬å†…å®¹...",
  "message": "ä»»åŠ¡åˆ›å»ºæˆåŠŸ"
}
```

### 3. å¯¼å‡ºè„šæœ¬

**æ¥å£**: `POST /api/airdrop/wizard/export`

**è¯·æ±‚ä½“**: åŒç”Ÿæˆè„šæœ¬æ¥å£

**å“åº”**:
```json
{
  "success": true,
  "script": "// ç”Ÿæˆçš„è„šæœ¬å†…å®¹...",
  "fileName": "Lineraç©ºæŠ•.js",
  "fileType": "javascript",
  "contentType": "application/javascript",
  "message": "è„šæœ¬å¯¼å‡ºæˆåŠŸ"
}
```

### 4. è·å–é…ç½®æ¨¡æ¿

**æ¥å£**: `GET /api/airdrop/wizard/template`

**å“åº”**: è¿”å›é»˜è®¤çš„é…ç½®æ¨¡æ¿

---

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ç®€å•çš„é¡µé¢æ“ä½œè„šæœ¬

```bash
curl -X POST http://localhost:8080/api/airdrop/wizard/generate \
  -H "Content-Type: application/json" \
  -d '{
    "projectName": "æµ‹è¯•ä»»åŠ¡",
    "websiteUrl": "https://example.com",
    "scriptType": "javascript",
    "pageActions": [
      {
        "actionType": "navigate",
        "order": 1,
        "params": {"url": "https://example.com"}
      },
      {
        "actionType": "click",
        "order": 2,
        "params": {"selector": "button#submit"}
      }
    ]
  }'
```

### ç¤ºä¾‹2: å®Œæ•´çš„ç©ºæŠ•ä»»åŠ¡

```bash
curl -X POST http://localhost:8080/api/airdrop/wizard/create-task \
  -H "Content-Type: application/json" \
  -d '{
    "projectName": "Lineraç©ºæŠ•",
    "websiteUrl": "https://linera.io",
    "scriptType": "javascript",
    "enableSocialTasks": true,
    "twitterTask": {
      "enabled": true,
      "account": "@linera_official"
    },
    "enableOnchainTasks": true,
    "connectWallet": true,
    "claimConfig": {
      "enabled": true,
      "claimUrl": "https://linera.io/claim"
    }
  }' \
  --data-urlencode "profileIds=profile_001,profile_002" \
  --data-urlencode "executeImmediately=true"
```

### ç¤ºä¾‹3: å¯¼å‡ºè„šæœ¬

```bash
curl -X POST http://localhost:8080/api/airdrop/wizard/export \
  -H "Content-Type: application/json" \
  -d '{
    "projectName": "Lineraç©ºæŠ•",
    "websiteUrl": "https://linera.io",
    "scriptType": "javascript",
    ...
  }' \
  -o linera_script.js
```

---

## ğŸ¨ ç”Ÿæˆçš„è„šæœ¬ç¤ºä¾‹

### JavaScriptè„šæœ¬

```javascript
/**
 * Lineraç©ºæŠ• è‡ªåŠ¨åŒ–è„šæœ¬
 * ç”±è„šæœ¬å‘å¯¼è‡ªåŠ¨ç”Ÿæˆ
 */

// ========== è¾…åŠ©å‡½æ•° ==========

function wait(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
}

async function safeClick(selector, timeout = 10000) {
    try {
        await page.waitForSelector(selector, { timeout });
        const element = await page.$(selector);
        if (element) {
            await element.click();
            return true;
        }
        return false;
    } catch (error) {
        console.error('ç‚¹å‡»å¤±è´¥:', selector, error);
        return false;
    }
}

// ä¸»è„šæœ¬å¼€å§‹
(async () => {
    try {
        console.log('=== å¼€å§‹æ‰§è¡ŒLineraç©ºæŠ•ä»»åŠ¡ ===');

        // æ­¥éª¤1: è®¿é—®é¡¹ç›®ç½‘ç«™
        console.log('è®¿é—®ç½‘ç«™: https://linera.io');
        await page.goto('https://linera.io');
        await page.waitForTimeout(2000);

        // æ­¥éª¤2: æ‰§è¡Œé¡µé¢æ“ä½œ
        // ç‚¹å‡»è¿æ¥é’±åŒ…æŒ‰é’®
        const clickElement = await page.$('[data-testid="connect-wallet"]');
        if (clickElement) {
            await clickElement.click();
            await page.waitForTimeout(1000);
            console.log('ç‚¹å‡»æˆåŠŸ: [data-testid="connect-wallet"]');
        }

        // æ­¥éª¤3: å®Œæˆç¤¾äº¤ä»»åŠ¡
        // Twitterä»»åŠ¡
        try {
            const twitterPage = await page.context().newPage();
            await twitterPage.goto('https://twitter.com/@linera_official');
            await twitterPage.waitForTimeout(2000);
            const followButton = await twitterPage.$('[data-testid="follow"]');
            if (followButton) {
                await followButton.click();
                await twitterPage.waitForTimeout(1000);
                console.log('Twitterå…³æ³¨æˆåŠŸ: @linera_official');
            }
            await twitterPage.close();
        } catch (error) {
            console.error('Twitterä»»åŠ¡å¤±è´¥:', error);
        }

        // æ­¥éª¤4: æ‰§è¡Œé“¾ä¸Šæ“ä½œ
        // è¿æ¥é’±åŒ…
        try {
            const walletButton = await page.$('[data-testid="connect-wallet"]');
            if (walletButton) {
                await walletButton.click();
                await page.waitForTimeout(1000);
                console.log('é’±åŒ…è¿æ¥æˆåŠŸ');
            }
        } catch (error) {
            console.error('é’±åŒ…è¿æ¥å¤±è´¥:', error);
        }

        // Claimæ“ä½œ
        try {
            await page.goto('https://linera.io/claim');
            await page.waitForTimeout(2000);
            const claimButton = await page.$('button:has-text(\'Claim\')');
            if (claimButton) {
                await claimButton.click();
                await page.waitForTimeout(3000);
                console.log('ClaimæˆåŠŸ');
            }
        } catch (error) {
            console.error('Claimå¤±è´¥:', error);
        }

        console.log('=== Lineraç©ºæŠ•ä»»åŠ¡å®Œæˆ ===');
        return { success: true, message: 'ä»»åŠ¡æ‰§è¡Œå®Œæˆ' };
    } catch (error) {
        console.error('ä»»åŠ¡æ‰§è¡Œå¤±è´¥:', error);
        throw error;
    }
})();
```

---

## ğŸ”§ æœ€ä½³å®è·µ

### 1. é…ç½®å»ºè®®

- **é¡¹ç›®åç§°**ï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„åç§°ï¼Œä¾¿äºè¯†åˆ«
- **ç­‰å¾…æ—¶é—´**ï¼šæ ¹æ®å®é™…é¡µé¢åŠ è½½é€Ÿåº¦è°ƒæ•´
- **é”™è¯¯å¤„ç†**ï¼šå¯ç”¨é”™è¯¯é‡è¯•ï¼Œæé«˜æˆåŠŸç‡
- **è¾…åŠ©å‡½æ•°**ï¼šå»ºè®®å¯ç”¨ï¼Œæä¾›æ›´å¤šåŠŸèƒ½

### 2. é¡µé¢æ“ä½œé¡ºåº

1. å…ˆå¯¼èˆªåˆ°ç›®æ ‡é¡µé¢
2. ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ
3. æ‰§è¡Œç‚¹å‡»ã€è¾“å…¥ç­‰æ“ä½œ
4. æ¯ä¸ªæ“ä½œåé€‚å½“ç­‰å¾…

### 3. ç¤¾äº¤ä»»åŠ¡

- ä½¿ç”¨æ–°æ ‡ç­¾é¡µæ‰“å¼€ç¤¾äº¤å¹³å°
- æ“ä½œå®Œæˆåå…³é—­æ ‡ç­¾é¡µ
- æ·»åŠ é”™è¯¯å¤„ç†ï¼Œé¿å…å½±å“ä¸»æµç¨‹

### 4. é“¾ä¸Šæ“ä½œ

- ç¡®ä¿é’±åŒ…å·²è¿æ¥
- æ“ä½œå‰ç­‰å¾…äº¤æ˜“ç¡®è®¤
- ä½¿ç”¨åˆé€‚çš„Gasè´¹ç”¨

---

## â“ å¸¸è§é—®é¢˜

### Q1: ç”Ÿæˆçš„è„šæœ¬å¯ä»¥ä¿®æ”¹å—ï¼Ÿ

**A**: å¯ä»¥ã€‚ç”Ÿæˆçš„è„šæœ¬æ˜¯çº¯æ–‡æœ¬ï¼Œæ‚¨å¯ä»¥åœ¨å¯¼å‡ºåæ‰‹åŠ¨ä¿®æ”¹ã€‚

### Q2: æ”¯æŒå“ªäº›æ“ä½œç±»å‹ï¼Ÿ

**A**: ç›®å‰æ”¯æŒï¼š
- é¡µé¢å¯¼èˆªï¼ˆnavigateï¼‰
- å…ƒç´ ç‚¹å‡»ï¼ˆclickï¼‰
- æ–‡æœ¬è¾“å…¥ï¼ˆinputï¼‰
- ç­‰å¾…ï¼ˆwait, waitForSelectorï¼‰
- é¡µé¢æ»šåŠ¨ï¼ˆscrollï¼‰

### Q3: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰æ“ä½œï¼Ÿ

**A**: ç›®å‰éœ€è¦é€šè¿‡å¯¼å‡ºè„šæœ¬åæ‰‹åŠ¨æ·»åŠ ã€‚æœªæ¥ç‰ˆæœ¬å°†æ”¯æŒè‡ªå®šä¹‰æ“ä½œç±»å‹ã€‚

### Q4: ç”Ÿæˆçš„è„šæœ¬å¯ä»¥ç›´æ¥æ‰§è¡Œå—ï¼Ÿ

**A**: å¯ä»¥ã€‚ç”Ÿæˆçš„è„šæœ¬ç¬¦åˆå¯¹åº”è„šæœ¬å¼•æ“çš„è¯­æ³•è§„èŒƒï¼Œå¯ä»¥ç›´æ¥åœ¨è„šæœ¬æ‰§è¡Œæ¨¡å—æ‰§è¡Œã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- [ä½¿ç”¨æŒ‡å—](ä½¿ç”¨æŒ‡å—.md)
- [å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹](demo-scripts/å®Œæ•´å·¥ä½œæµç¨‹ç¤ºä¾‹.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-12-28

