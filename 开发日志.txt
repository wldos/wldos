2026-01-08

wldos-framework 数据库操作api底层实现开源
站点资源添加支持勾选部分资源
前端ui框架新增更多antd组件暴露给插件ui使用，支持检查插件ui的esm是否正确导出
升级到2.3.6

2026-01-07

重构、优化wldos-orm框架，比mybatis plus、jdbc、data-jdbc都好用的数据库操作api。
BaseDao (接口)
  ├── saveOrUpdate() - 统一的保存/更新方法（推荐使用，返回实体对象）
  ├── saveOrUpdate(entity, SaveOptions) - 使用配置对象（推荐使用，返回实体对象）
  ├── saveOrUpdateAll() - 批量保存（推荐使用，返回实体集合）
  └── saveOrUpdateAll(entities, SaveOptions) - 使用配置对象（推荐使用，返回实体集合）

SaveOptions (配置对象)
  ├── defaults() - 默认选项
  ├── forImport() - 数据导入选项
  ├── includeAllFields() - 写入所有字段选项
  ├── mergeNulls() - 合并 null 值选项
  └── custom() - 自定义选项（Builder 模式）
修正orm api表名获取异常
修正插件不支持独立版本管理和独立开发测试的问题


2025-12-25

插件市场与应用商店模块分离，作为用户端封装存在。
插件前后端自动绑定前缀封装，插件前端ui自动读取配置创建api前缀。
1.首页实现真正的动态路由：支持自定义组件绑定、系统内置模板切换、站外url跳转。
2.插件前后端自动绑定前缀封装，插件前后端无感区分主应用，真正实现业务无关的插件开发支持。
完全打通插件市场的上传、审核、安装。 支持本地上传、gitee、github两种安装源的插件市场生态。
新增类型管理，支持树状分类定义、扁平标签和字典定义。 新增demo插件作为wldos插件开发实例和基础脚手架。
新增插件市场-插件审核，打通插件市场、插件安装、插件上传和插件市场维护支持。
wldos-ui前端项目结构变更，前端代码迁移到根目录。
插件umijs、esm双格式输出方案支持。
修正token刷新异常：全局响应处理器必须声明包名包括所有controller才能保证request携带链路上追加的请求头参数。
修正图片目录不能正常加载的问题，改为spring静态路径方式配置，资源映射类方式不可行。
插件的加载改为纯前端同源fetch（与本地组件的动态路由一致运行时import）。
新增插件ui的开发预览、测试支持。 新增插件同部署方案的框架工程化支持。
新增前后端同部署插件加载能力（后端安装钩子、提供控制器接口、卸载/升级清理、前端动态路由改造从manifest加载本地插件组件）。 新增桌面启动器界面优化方案。
修正加密jar解压重复出现10个的问题。 修正插件模块加密后不能正确启动问题。 修正插件模块启动时不支持加载插件目录的问题。
桌面端与云端共享wldos-ui模块； 修正插件、ui、图片存储目录不支持相对路径的问题。 桌面端与云端同部署结构。 插件同部署迁移准备。 修正插件初始化异常，插件底层加密。
删除插件自有node
修正markdown字数统计，修正markdown代码内注释错误导航目录的问题。 完善umd远程注册机制，完成脚本 Promise 缓存、加载超时、失败清理。
ensureRequestInjected() 与版本指纹接入。 基于插件运行时的基础埋点打点。
依赖管理增强（动态加载、冲突检测、共享追踪） 应用/资源管理增强（插件资源清理和保护一致性） 菜单配置验证规则更新，插件顶级菜单占位，不绑定插件。
 多次进入同一插件菜单仅加载一次脚本（脚本 Promise 缓存已实现） 通过注册表加载的插件与旧 UMD 路径兼容，渲染一致（组件发现优先级已实现）
 有基础埋点数据可用于排查加载性能与错误（埋点已实现，支持实时和批量上报） 应用删除时正确清理所有关联数据（插件应用自动卸载，非插件应用兜底清理）
新增文章、文集等设置内容水印。
内容和文章增加mimetype信息。
修正自动登录问题。 简化token生成方法和过期刷新逻辑修正。 社会化登录默认15天有效期。
修正自动登录问题。
新增指定用户权限信息查询。
解决应用管理问题，新增来源，融合插件管理到应用管理中。
融合插件与应用管理，插件安装即注册系统应用，同步维护缓存。
约定插件路由前后统一按/plugins/{pluginCode}为前缀设置,只有已安装且未禁用的插件才能通过API网关访问。
约定插件路由前后统一按/{plugins}/{pluginCode}为前缀设置{wldos.plugin.route-prefix:/plugins/},只有已安装且未禁用的插件才能通过API网关访问。
约定插件路由前后统一按/plugins/{pluginCode}为前缀设置。
修正插件的api请求找不到controller的问题（共享主dispatchServlet，注册插件controller的url到spring mvc主应用的映射处理器，插件共享springmvc能力）；
修正插件的api请求找不到controller的问题（插件controller以专有名称注入主容器，共享主dispatchServlet）；
1.修正本地数据库操作获取userid为null时的异常处理； 2.修正插件的api请求找不到controller的问题（暂定每个插件一个dispatchServlet）；
新增插件api网关的支持； 约定插件前端ui的api交互规范和工具；
修正hook不支持线程上下文的classloader问题，解决插件注册hook的插件类实例级联调用找不到引用类的问题；
解决插件类在主应用找不到的问题-动态切换classloader；
解决插件创建springboot上下文扫描spring类的问题； 修正全栈插件安装异常问题； 解决wldos框架不支持第三方项目依赖自动装配的问题；
修正插件不支持springboot容器能力和不支持spring data jdbc能力问题； 解决插件ui远程给前端异常的问题； 形成wldos动态分布式一体化落地方案；
 形成应用、扩展、插件融合的管理方案，为实现wldos动态分布式一体化提供基础支撑。
解决带数据库、菜单、权限的插件安装失败问题；
约定插件的表名规则，sql脚本用通配符{t:表名后缀}表示plugin_code_表名后缀的真实表名，实体用真实表名，代码和实体一致。
1.修正菜单资源查询不支持多个资源类型的问题； 2.解决插件安装校验器误报问题和模板不符合规范问题； 3.解决插件安装时数据库脚本路径不对问题；
 4.解决插件安装时资源类型长度超出数据库字段设计长度，增大资源类型字段长度为30.
新增插件菜单、权限的支持；
菜单新增资源类型；
去掉插件运行时注册扩展，改为插件安装时写入资源到数据库，与主系统资源权限体系融合。 保留插件ui远程访问信息api。 制定插件配置模板和校验器，约定模板文档。
新增插件ui扩展支持，支持菜单路由权限设置融入系统体系； 新增插件ui扩展模块以umd格式输出构建，并以api方式提供远程访问； 约定插件目录和构建结构，约定插件详细规约；


2025-08-30
1.前端配置的路由迁移到后端配置，在数据库中存储。
目前已经实现测试菜单的后端配置。
2.前后端分离的扩展能力(以插件方式实现热插拔的模块扩展，在应用层面和系统层面实现扩展，应用扩展叫插件，系统扩展叫应用)：插件前端集成方案
以测试插件为最佳实践，实现插件的路由和菜单融合进主系统，并在前端正常加载和渲染，支持预设角色权限。
通过注册系统独立模块hook实现独立模块的扩展，支持热插拔，从而真正意义上实现动态单体。

插件UI资源管理器：管理插件UI目录的注册和访问
插件UI驱动服务：在插件安装/启用时自动注册UI路径和菜单权限
前端动态路由支持：让前端能够加载插件UI

插件驱动机制：
PluginManagerService - 插件生命周期管理
PluginUiDriverService - 插件UI驱动服务
PluginExtensionRegistry - 插件扩展注册表
UserService - 集成插件菜单到用户权限体系
前端集成：
wldos-pro 前端通过 UserController 获取菜单和权限
动态路由组件支持插件UI加载

统一管理：系统层面可以统一管理所有插件的数据库、权限、菜单，避免重复代码
事务一致性：系统层面可以确保插件安装/卸载的原子性
安全性：系统层面可以统一验证权限和菜单的合法性
可维护性：集中管理更容易维护和升级

现有驱动：负责插件的加载、卸载、UI资源管理
新增系统服务：负责插件的数据库、权限、菜单管理
集成点：在 PluginController.installPlugin() 中先执行系统服务，再执行插件驱动

// 插件安装时
1. 创建插件数据库表
2. 注册插件权限到 sys_permission 改为 wo_role
3. 注册插件菜单到 sys_menu 改为 wo_resource
4. 建立菜单-权限关联到 sys_menu_permission 改为 wo_auth_role
5. 可选：为默认角色分配插件权限 guest（游客）、user（注册用户）、admins（管理员）、tadmin（租户管理员）、admin（超级管理员）。

// 用户访问时
1. UserService.queryUser() 获取用户菜单
2. 包含系统菜单 + 插件菜单
3. 前端根据菜单权限控制UI显示

3.从首页、各功能模块、登录、系统管理等功能优化不完善的部分。
4.编写wldos全局操作手册和技术开发文档。

2023-04-23
WLDOS平台终极目标是打造一个沉浸式演进系统，所有用户都可以在上面研发、开发、实施业务，各取所需、自得其乐。
WLDOS云应用支撑平台2.0是云物互联支撑平台的核心版本，在登上2.0高山之前需要完善必要的前奏功能。

要补齐的功能点：

一、信息管理

是指信息发布模块免费发布的信息条目的管理功能。（已实现）

二、个人中心

是指注册用户的个人中心展示和维护，具体包括：昵称、个性签名、头衔、组织、地址、个人标签和会员级别等信息项。（已实现）

后期将通过这里维护所属组织，设置用户自己的主企业，从而引入企业应用场景。（已实现部分）

三、广告位

本平台提供了很多免费展示信息的模板，自然加入广告板块，用于流量分成和自营业务的推广。

四、信息编辑增强

当下的信息发布仅能发布文字信息，需要增加富文本编辑器，支持图片等多媒体上传功能，更全面地展示信息详情。（已实现）

五、评论管理

各板块产生用户评论需要一个统一的管理控制。（已实现）

六、作者管理

也是用户管理的延伸，目的在于可以管控不正当行为用户，禁言、拉黑和警告等处理功能。（已实现）

七、系统设置

不同于spring boot框架中的基础配置，这是对系统环境的定制设置，取决于运营者的具体需求，而设置的一揽子开关设置和阈值设置等等。
这个设置是在运行时改变系统的运行方式。（已实现）

八、系统升级

一是在线升级能力，二是离线升级能力。为WLDOS平台的升级演化提供原生方案，降低用户使用门槛。
在线升级：与官方升级服务通信，比对可升级版本，手动选择安装更新（系统后台下载升级包、安装覆盖升级包）。
离线升级：手动上传离线升级包，系统后台安装升级完成。
升级过程包括jar包安装、web前端安装、数据库更新。（暂时为传统手动部署）

九、运维部署

包括安装、日常运维的支持能力，让WLDOS平台作为一个系统软件运行，降低用户使用门槛。

十、三方登录

提高系统登录的便捷性，对接常用互联网账号，实现符合auth2.0规范的接口功能。基础上实现手机登录功能。（已实现）

十一、社会化分享

文章、信息、产品等支持一键分享到第三方平台，增强社会化传播能力。（已实现）

十二、站内消息

用户状态或业务服务的站内消息提醒功能。让用户第一时间得到业务通知。

十三、订单交易

简单的开放式订单采购和付款支持，对接第三方交易担保平台，实现自营商品或服务的订单交易能力。


2.0核心功能：服务集成和开放、漫游服务网格架构支持、物联网支持、机器人支持。必要的话，实现业务工作流和业务报表能力。
wldos每个实例都是完整的单体，同时支持动态卸载或开启局部模块功能，支持服务网格架构下的实例融合。
单实例是一个系统，每个系统都是微服务架构的多模块工程，系统实例之间可以融合为新系统。


当下待解决问题：

基于react的前端跨终端实现，组件化和服务化融合，后端支持直接输出html（嵌入模板引擎）用于满足特殊需求场景。
在线升级、离线升级、分布式升级能力，相当于解决了最核心的运维问题。
许可证绑定、申请、分发、验证，解决商业化问题。
自驱式演化系统，支持在线编程和功能进化（高级智能演进架构支撑系统）。


趁起步期门槛够低，欢迎感兴趣的朋友加入进来，开源社区：
https://gitee.com/wldos/wldos

WLDOS发展规划：

一、1.0实现开发框架、系统管理和内容管理三大模块。
系统管理包含系统配置、应用管理、资源管理、角色权限管理、租户管理、体系结构、组织机构、用户管理、域管理、类型管理、标签管理。

内容管理包含作品管理、作品篇章管理。

同时实现了网关、api鉴权、登录认证、jwt、文件服务。

门户、博客、信息发布、内容创作工具、内容付费查看等用户侧服务功能。并对SEO做了专门优化设计，支持伪静态请求链接。

目前处于1.5版本，功能持续完善中。

1.0的关键词是：支撑。

二、2.0在1.0的基础上实现分布式应用注册中心、资源注册中心、服务发布、服务计量、商城系统和订单中心、运维中心、分布式缓存、负载均衡、限流降级、APP端、webflux架构。
最终支持服务网格、开放平台、服务发布和计费系统。

同时酌情实现工作流、报表引擎、大数据处理、容器化支持等。

2.0的关键词是：扩展。

三、3.0实现嵌入式通信、嵌入式端，支持物联网。

在2.0的基础上实现基于互联网、物联网的应用支持能力。

3.0的关键词是：连接。

四、4.0实现智能化，支持智能软件工厂，数字化智能。

在3.0的基础上增加根据需求在平台内应用建模、智能构建新功能的免代码软件工厂功能。
增加数据动态感知能力，平台初步具备“意识”，发现、创建更多新场景和新能力。
平台架构由分布式回归单体，软件规模压缩、效能提升，支持自我调整，自动替代、合并或关闭不适合或冗余模块。

4.0的关键词是：智能。

WLDOS沟通现实、驱动世界。

5.0将进入硬件领域。